<?xml version="1.0" encoding="utf-8" ?>
<odoo>

<!--        <template id="website_sale_products_item" name="Product Item Base" inherit_id="website_sale.products_item">-->
    <!-- Add SKU into product list and product grid views-->
    <!--        <xpath expr="//section/h5" position="before">-->
    <!--            <div class="product_details-sku" t-if="product.default_code">-->
    <!--                <strong>SKU: </strong><span itemprop="sku" t-esc="product.default_code"/>-->
    <!--            </div>-->
    <!--        </xpath>-->
<!--        </template>-->

    <!-- Catch not published categories if their child are published -->
    <template id="website_sale_option_collapse_categories_recursive" inherit_id="website_sale.option_collapse_categories_recursive" name="Collapse Category Recursive Product Base">
        <xpath expr="//i" position="attributes">
            <attribute name="t-if" add="and (categ.child_id.filtered(lambda x: x.website_published if x.website_published is True else False))" separator=" "/>
        </xpath>
        <xpath expr="//ul" position="attributes">
            <attribute name="t-if" add="and (categ.child_id.filtered(lambda x: x.website_published if x.website_published is True else False))" separator=" "/>
        </xpath>
        <xpath expr="//t[@t-call='website_sale.option_collapse_categories_recursive']" position="attributes">
            <attribute name="t-if">categ.website_published</attribute>
        </xpath>
    </template>

<!--    <template id="website_sale_product" name="Product Base" inherit_id="website_sale.product">-->
        <!-- Add SKU into product detail view without replace all product detail template -->
        <!--        <xpath expr="//div[@id='product_details']/h1" position="after">-->
<!--                    <div class="product_details-sku" t-if="product.default_code">-->
<!--                        <strong>SKU: </strong><span itemprop="sku" t-esc="product.default_code"/>-->
<!--                    </div>-->
        <!--        </xpath>-->
<!--    </template>-->

    <template id="simulate_products_tags" name="Simulate Product Dismac Tags" inherit_id="website_base.simulate_products">
        <xpath expr="//div[@id='products_grid_before']" position="inside">
            <t t-set="tags" t-value="request.env['product.template.tag'].search([], limit=50)"/>
            <t t-if="tags">
                <div class="nav nav-pills flex-column menu-category mt16 pt8">
                    <span>Tags</span>
                    <div class="oe_structure mt16">
                        <t t-foreach="tags" t-as="tag">
                            <t t-call="website_seo_settings.website_tag_template">
                                <t t-set="tag" t-value="tag"/>
                            </t>  
                        </t>
                    </div>
                </div>
            </t>
        </xpath>
    </template>

    <template id="website_sale_search_for_pricelist" name="Search Box Pricelist">
        <form t-att-action="keep('/tarifas', search=0)" method="get" t-att-class="_classes">
            <t t-if="attrib_values">
                <t t-foreach="attrib_values" t-as="a">
                    <input type="hidden" name="attrib" t-att-value="'%s-%s' % (a[0], a[1])" />
                </t>
            </t>
            <t t-call="website.website_search_box" />
        </form>
    </template>

    <template id="website_sale_products_pricelist" name="Product Dismac Pricelist" inherit_id="website_sale.products">
        <xpath expr="//t[@t-call='website_sale.search']" position="after">
            <t t-if="list_type and list_type == 'pricelist'" t-call="website_base.website_sale_search_for_pricelist">
                <t t-set="_classes">o_website_sale_search</t>
            </t>
        </xpath>
    </template>

</odoo>